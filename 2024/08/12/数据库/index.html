<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>数据库 | Sytmdm&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="# 数据库  目前市面常用的数据库：1、Oracle:甲骨文、关系型数据库、重量级2、MongDB：微软3、Redis：内存数据库4、Sql Server：微软5、sqlite3：嵌入式数据库、轻量级6、Mysql：关系型数据库、重量级，高性能">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库">
<meta property="og:url" content="https://sytmdm.github.io/2024/08/12/%E6%95%B0%E6%8D%AE%E5%BA%93/index.html">
<meta property="og:site_name" content="Sytmdm&#39;s Blog">
<meta property="og:description" content="# 数据库  目前市面常用的数据库：1、Oracle:甲骨文、关系型数据库、重量级2、MongDB：微软3、Redis：内存数据库4、Sql Server：微软5、sqlite3：嵌入式数据库、轻量级6、Mysql：关系型数据库、重量级，高性能">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-08-12T20:15:00.000Z">
<meta property="article:modified_time" content="2024-08-12T20:15:00.000Z">
<meta property="article:author" content="sytmdm">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Sytmdm's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Sytmdm&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://sytmdm.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-数据库" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/12/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="article-date">
  <time class="dt-published" datetime="2024-08-12T20:15:00.000Z" itemprop="datePublished">2024-08-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      数据库
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <meta name="referrer" content="no-referrer"/>
# 数据库

<p>目前市面常用的数据库：<br><strong>1、Oracle:甲骨文</strong>、关系型数据库、重量级<br>2、MongDB：微软<br>3、Redis：内存数据库<br>4、Sql Server：微软<br>5、sqlite3：嵌入式数据库、轻量级<br><strong>6、Mysql</strong>：关系型数据库、重量级，高性能</p>
<span id="more"></span>
<p>sql语句：存储数据，删除数据，修改数据，查询数据</p>
<h2 id="sqlite3："><a href="#sqlite3：" class="headerlink" title="sqlite3："></a>sqlite3：</h2><p>一个轻量级的嵌入式数据库管理系统，台式一个自包含的，无服务器的、零配置的事务性SQL</p>
<h3 id="进入sqlite3命令行语句"><a href="#进入sqlite3命令行语句" class="headerlink" title="进入sqlite3命令行语句"></a>进入sqlite3命令行语句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlite3  your_database_name.db</span><br></pre></td></tr></table></figure>

<h3 id="退出命令行"><a href="#退出命令行" class="headerlink" title="退出命令行"></a>退出命令行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.quit</span><br></pre></td></tr></table></figure>

<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.databases</span><br></pre></td></tr></table></figure>

<h3 id="查看数据库所有表"><a href="#查看数据库所有表" class="headerlink" title="查看数据库所有表"></a>查看数据库所有表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.tabels</span><br></pre></td></tr></table></figure>

<p>第一行：字段<br>后面跟数据</p>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE students(</span><br><span class="line">	id INTERGER PRIMARY KEY,</span><br><span class="line">	name TEXT NOT NULL,</span><br><span class="line">	age INTGER,</span><br><span class="line">	grade TEXT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如果表不存在就创建，存在就不管</span><br><span class="line">CREATE TABLE if net exists userInfo(   \</span><br><span class="line">      username text not null,  \</span><br><span class="line">      passwd text not null);&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="展现创建表的模式"><a href="#展现创建表的模式" class="headerlink" title="展现创建表的模式"></a>展现创建表的模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.schema students</span><br></pre></td></tr></table></figure>

<h3 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h3><p>主键是表中唯一标识每一行的字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id INTERGER PRIMARY KEY</span><br></pre></td></tr></table></figure>

<h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO students(name,age,grade) VALUES(&#x27;alice&#x27;,23,&#x27;A&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">查看所有内容</span><br><span class="line">SELECT * from students;</span><br><span class="line">ps: *是通配符</span><br><span class="line">只看name</span><br><span class="line">SELECT name from students;</span><br><span class="line">看name和age</span><br><span class="line">SELECT name,age from students;</span><br><span class="line">想看年龄大于20</span><br><span class="line">SELECT name,age from students where age&gt;20;</span><br><span class="line">想看年龄大于20且成绩为A</span><br><span class="line">SELECT * from students where age&gt;20 and grade=&#x27;A&#x27;;</span><br><span class="line">想看年龄在20到30区间</span><br><span class="line">SELECT * from students where age between 20 and 30;</span><br></pre></td></tr></table></figure>

<h3 id="更新数据（修改数据）"><a href="#更新数据（修改数据）" class="headerlink" title="更新数据（修改数据）"></a>更新数据（修改数据）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE students SET age=&#x27;24&#x27; where name =&#x27;xxx&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM students where name=&#x27;xxx&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="SQL函数"><a href="#SQL函数" class="headerlink" title="SQL函数"></a>SQL函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) FROM students;</span><br><span class="line">判断表里是否存在zhangsan，返回值为zhangsan的数量</span><br><span class="line">SELECT COUNT(*) FROM students where username=&#x27;zhangsan&#x27;;</span><br><span class="line">SELECT COUNT(*) FROM userInfo where username=&#x27;zhangsan&#x27; and passwd=&#x27;123&#x27;;</span><br><span class="line">SELECT COUNT(1) FROM userInfo where username=&#x27;zhangsan&#x27; and passwd=&#x27;123&#x27;;</span><br><span class="line">ps:效果一样，但count（1）效率远大于count（*）</span><br></pre></td></tr></table></figure>

<p>计算学生平均年龄</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(age) FROM students;</span><br></pre></td></tr></table></figure>

<p>查询最大</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(age) FROM students;</span><br></pre></td></tr></table></figure>

<p>查询最小</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(age) FROM students;</span><br></pre></td></tr></table></figure>

<p>计算总和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x SELECT SUM(age) FROM students;</span><br></pre></td></tr></table></figure>

<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>MySQL是一个关系型数据库管理系统，广泛运用与Web应用和企业系统，具有高性能，高可靠性，高可用性等优点</p>
<h3 id="安装mysql-ubuntu"><a href="#安装mysql-ubuntu" class="headerlink" title="安装mysql(ubuntu)"></a>安装mysql(ubuntu)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure>

<h3 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl</span><br></pre></td></tr></table></figure>

<h3 id="进入mysql命令行"><a href="#进入mysql命令行" class="headerlink" title="进入mysql命令行"></a>进入mysql命令行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<h3 id="查看mysql服务器里的的数据库名"><a href="#查看mysql服务器里的的数据库名" class="headerlink" title="查看mysql服务器里的的数据库名"></a>查看mysql服务器里的的数据库名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<h3 id="创建数据库-1"><a href="#创建数据库-1" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE demoTest;</span><br></pre></td></tr></table></figure>

<h3 id="MySQL-客户端切换到名为-demoTest-的数据库"><a href="#MySQL-客户端切换到名为-demoTest-的数据库" class="headerlink" title="MySQL 客户端切换到名为 demoTest 的数据库"></a>MySQL 客户端切换到名为 <code>demoTest</code> 的数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use demoTest;</span><br></pre></td></tr></table></figure>

<h3 id="返回当前被选择的数据库的名称。"><a href="#返回当前被选择的数据库的名称。" class="headerlink" title="返回当前被选择的数据库的名称。"></a>返回当前被选择的数据库的名称。</h3><p>如果当前没有选择任何数据库，这条命令将返回 <code>NULL</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></table></figure>

<h3 id="创建表-1"><a href="#创建表-1" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE students(</span><br><span class="line">	id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">	name VARCHAR(100) NOT NULL,</span><br><span class="line">	agt INT,</span><br><span class="line">	grade VARCHAR(10)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>AUTO_INCREMENT PRIMARY KEY,：设置id为自增主键</p>
<h3 id="查看表名"><a href="#查看表名" class="headerlink" title="查看表名"></a>查看表名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<h3 id="查看表"><a href="#查看表" class="headerlink" title="查看表"></a>查看表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESCRIBE students;</span><br></pre></td></tr></table></figure>

<h3 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h3><p>数值类型分为整数类型与浮点类型</p>
<p><strong>INT</strong>:标准整数</p>
<p><strong>FLOAT</strong>：单精度浮点数</p>
<h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><p><strong>DATA</strong>：日期，格式为 YYYY-MM-DD</p>
<p><strong>TIME</strong>:时间，格式为  HH：MM：SS</p>
<p><strong>DATETIME</strong>：日期和时间的组合，格式为：YYYY-MM-DD HH：MM：SS</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p><strong>CHAR</strong>：固定长度的字符串</p>
<p><strong>VARCHAR</strong>：可变长度的字符串</p>
<p><strong>TEXT</strong>：存储长文本数据，最大长度为：65535</p>
<h3 id="二进制类型（用于存储二进制数据）："><a href="#二进制类型（用于存储二进制数据）：" class="headerlink" title="二进制类型（用于存储二进制数据）："></a>二进制类型（用于存储二进制数据）：</h3><p><strong>BINARY</strong>：固定长度的二进制字符串，类似于CHAR，但用于二进制</p>
<h3 id="插入数据-1"><a href="#插入数据-1" class="headerlink" title="插入数据"></a>插入数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO students(name,age,grade) VALUES(&#x27;zhangsan&#x27;,21,&#x27;A&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="查询数据-1"><a href="#查询数据-1" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * from teacher;</span><br><span class="line">SELECT name,age from teacher;</span><br><span class="line">SELECT age from teacher where age&gt;21;</span><br></pre></td></tr></table></figure>

<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE teacher SET age=&#x27;24&#x27; where name =&#x27;xxx&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据-1"><a href="#删除数据-1" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM teacher where name=&#x27;xxx&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE students;</span><br></pre></td></tr></table></figure>

<p>修改表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename table teacher to renameteacher;</span><br></pre></td></tr></table></figure>

<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>一组sql语句的集合，这些操作要么全部执行成功，要么全部回滚（重置到语句运行前的状态），以确保数据库的完整性和一致性</p>
<h4 id="事务的四个特性（ACID）"><a href="#事务的四个特性（ACID）" class="headerlink" title="事务的四个特性（ACID）"></a>事务的四个特性（ACID）</h4><p><strong>Atomicity（原子性）</strong></p>
<ul>
<li>事务中的所有操作要么全部执行，要么全部不执行</li>
<li>事务中的任何一个操作失误，整个失误就会回滚到执行前的状态</li>
</ul>
<p><strong>Consistrncy（一致性）</strong></p>
<p><strong>Isolation（隔离性）</strong></p>
<p><strong>Durabibity（持久性）</strong></p>
<h4 id="MySQL中的事务控制语句"><a href="#MySQL中的事务控制语句" class="headerlink" title="MySQL中的事务控制语句"></a>MySQL中的事务控制语句</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">START TRANSACTION 或 BEGIN</span><br><span class="line">开始事务</span><br><span class="line">COMMIT</span><br><span class="line">提交事务</span><br><span class="line">ROLLBACK</span><br><span class="line">回滚</span><br><span class="line"></span><br><span class="line">BEGIN; </span><br><span class="line">UPDATE teacher set age=age-1 where name=&#x27;zhangsan&#x27; </span><br><span class="line">UPDATE teacher set age =age+1 where name=&#x27;wangwu&#x27; </span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure>



<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><p>初始化数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MYSQL *sqlDB=nullptr;</span><br><span class="line">sqlDB=mysql_init(NULL);</span><br><span class="line">if(sqlDB==nullptr)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;mysql_init failed.&quot; &lt;&lt; endl;</span><br><span class="line">    _exit(-1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const char *host = &quot;localhost&quot;;</span><br><span class="line">const char *user = &quot;root&quot;;</span><br><span class="line">const char *passwd = &quot;1&quot;;</span><br><span class="line">const char *baseName = &quot;demoTest&quot;;</span><br><span class="line">int port = 3306;</span><br><span class="line">if(mysql_real_connect(sqlDB, host, user, passwd, baseName, port, NULL, 0)==NULL)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;connetc failed.&quot; &lt;&lt; endl;</span><br><span class="line">    _exit(-1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="执行语句"><a href="#执行语句" class="headerlink" title="执行语句"></a>执行语句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(sqlDB, sql);</span><br></pre></td></tr></table></figure>

<h3 id="查询语句"><a href="#查询语句" class="headerlink" title="查询语句"></a>查询语句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//查询语句</span><br><span class="line">sql = &quot;select * from students;&quot;;</span><br><span class="line">ret=mysql_query(sqlDB,sql);</span><br><span class="line">if(ret!=0)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;select failed:&quot; &lt;&lt;mysql_error(sqlDB)&lt;&lt; endl;</span><br><span class="line">    _exit(-1);</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; &quot;查询成功...&quot; &lt;&lt; endl;</span><br></pre></td></tr></table></figure>

<h3 id="结果集"><a href="#结果集" class="headerlink" title="结果集"></a>结果集</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//结果集</span><br><span class="line">   MYSQL_RES *result=mysql_store_result(sqlDB);</span><br><span class="line">   if(result==NULL)</span><br><span class="line">   &#123;</span><br><span class="line">       cout &lt;&lt; &quot;mysql_store_result error:&quot; &lt;&lt; mysql_error(sqlDB) &lt;&lt; endl;</span><br><span class="line">       exit(-1);</span><br><span class="line">   &#125;</span><br><span class="line">   //获取结果集的列数</span><br><span class="line">   unsigned cols=mysql_num_fields(result);</span><br><span class="line">   //获取结果集的行数</span><br><span class="line">   unsigned row=mysql_num_rows(result);</span><br></pre></td></tr></table></figure>

<h3 id="获取表的字段"><a href="#获取表的字段" class="headerlink" title="获取表的字段"></a>获取表的字段</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//获取数据库表的字段</span><br><span class="line">MYSQL_FIELD *field = NULL;</span><br><span class="line">while((field=mysql_fetch_field(result))!=NULL)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt;left&lt;&lt;setw(10)&lt;&lt;field-&gt;name;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br></pre></td></tr></table></figure>

<h3 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//获取数据</span><br><span class="line">MYSQL_ROW rows;</span><br><span class="line">while((rows=mysql_fetch_row(result))!=NULL)</span><br><span class="line">&#123;</span><br><span class="line">    //每个row变量表示一行</span><br><span class="line">    for (int i = 0; i &lt; cols; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; rows[i] &lt;&lt;&quot;\t&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">//释放结果集</span><br><span class="line">mysql_free_result(result);</span><br></pre></td></tr></table></figure>

<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><p>在Mysql中，外键是一种约束，它用于维护关系型数据库中表与表直接的关系，确保数据库的一致性和完整性。</p>
<p>外键的作用：</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sytmdm.github.io/2024/08/12/%E6%95%B0%E6%8D%AE%E5%BA%93/" data-id="cm10mntnx0002f9q77k0w5a4c" data-title="数据库" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/09/13/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          进程间通信
        
      </div>
    </a>
  
  
    <a href="/2024/08/01/%E4%BB%8EC%E5%88%B0C++/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">从C到C++</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/09/13/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/">进程间通信</a>
          </li>
        
          <li>
            <a href="/2024/08/12/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          </li>
        
          <li>
            <a href="/2024/08/01/%E4%BB%8EC%E5%88%B0C++/">从C到C++</a>
          </li>
        
          <li>
            <a href="/2024/08/01/%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81/">继承和多态</a>
          </li>
        
          <li>
            <a href="/2024/06/27/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 sytmdm<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>